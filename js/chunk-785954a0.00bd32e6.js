(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-785954a0"],{"0b4d":function(t,s,i){},"1aec":function(t,s,i){"use strict";i("0b4d")},"1dde":function(t,s,i){var e=i("d039"),a=i("b622"),n=i("2d00"),o=a("species");t.exports=function(t){return n>=51||!e((function(){var s=[],i=s.constructor={};return i[o]=function(){return{foo:1}},1!==s[t](Boolean).foo}))}},"5d94":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"orders"},[e("div",{staticClass:"express"},[e("div",{staticClass:"give"},[e("div",[t._v("快递配送")]),e("div",{on:{click:t.onclick}},[t._v("到店自提")])]),e("div",{staticClass:"van-cell",attrs:{"is-link":""},on:{click:t.showPopup}},[null==t.addressInfo?e("div",[t._v("设置收货地址")]):null!=t.addressInfo?e("div",{staticClass:"cell"},[e("p",[t._v(" "+t._s(t.submitlist&&t.submitlist.addressInfo.real_name)+" "),e("span",[t._v(t._s(t.submitlist&&t.submitlist.addressInfo.phone))])]),e("div",[e("span",{staticClass:"defaults"},[t._v("[默认]")]),t._v(" "+t._s(t.submitlist&&t.submitlist.addressInfo.province)+t._s(t.submitlist&&t.submitlist.addressInfo.city)+t._s(t.submitlist&&t.submitlist.addressInfo.district)+t._s(t.submitlist&&t.submitlist.addressInfo.detail)+" ")])]):t._e(),e("div",{staticClass:"icon"},[e("van-icon",{attrs:{name:"arrow"}})],1)]),t._m(0),e("van-popup",{attrs:{position:"bottom",closeable:""},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[e("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{add:t.onAdd},model:{value:t.chosenAddressId,callback:function(s){t.chosenAddressId=s},expression:"chosenAddressId"}})],1)],1),e("div",{staticClass:"heot"},[e("p",[t._v(" 共"+t._s(t.submitlist&&t.submitlist.cartInfo&&t.submitlist.cartInfo.length)+"件商品 ")]),t._l(t.submitlist&&t.submitlist.cartInfo,(function(s){return e("div",{key:s.id,staticClass:"he"},[e("div",{staticClass:"left"},[e("img",{attrs:{src:s.productInfo.image}})]),e("div",{staticClass:"right"},[e("span",[e("p",[t._v(t._s(s.productInfo.store_name))]),e("span",[t._v("×"+t._s(s.cart_num))])]),e("span",[t._v(t._s(s.productInfo.attrInfo.suk))]),e("span",[t._v("￥"+t._s(s.productInfo.price))])])])}))],2),e("ul",[e("li",{on:{click:function(s){t.showList=!0}}},[e("span",[t._v("优惠价")]),e("span",[t._v(" 请选择 "),e("van-icon",{attrs:{name:"arrow"}})],1)]),e("li",[e("span",[t._v("积分抵扣")]),e("span",{staticClass:"jifen",on:{click:t.checkeds}},[t._v(" 当前积分 "),e("u",[t._v(t._s(t.submitlist&&t.submitlist.userInfo.integral))]),e("van-checkbox",{model:{value:t.checked,callback:function(s){t.checked=s},expression:"checked"}})],1)]),e("van-popup",{staticClass:"couponbox",style:{height:"36%"},attrs:{closeable:"",round:"",position:"bottom"},model:{value:t.showList,callback:function(s){t.showList=s},expression:"showList"}},[e("div",{staticClass:"couponTitle"},[t._v("优惠券")]),e("div",{staticClass:"couponImg"},[e("img",{attrs:{src:i("e82e")}})])]),e("li",[e("span",[t._v("会员优惠")]),e("span",[t._v("-￥"+t._s(t.priceGroups&&t.priceGroups.vipPrice))])]),e("li",[e("span",[t._v("快递费用")]),e("span",[t._v(" "+t._s(t.priceGroups&&0==t.priceGroups.storePostage?"免运费":t.priceGroups&&"￥"+t.priceGroups.storePostage)+" ")])]),e("li",[t._v("信息备注")]),t._m(1)],1),e("div",{staticClass:"Payment"},[e("p",[t._v("支付方式")]),e("div",{staticClass:"method"},[e("div",{class:1==t.index?"no":"",on:{click:t.weixin}},[e("span",[e("van-icon",{attrs:{name:"wechat"}}),t._v("微信支付 ")],1),e("span",[t._v("微信快捷支付")])]),e("div",{class:2==t.index?"no":"",on:{click:t.yuee}},[e("span",[e("van-icon",{attrs:{name:"gold-coin-o"}}),t._v("余额支付 ")],1),e("span",[t._v("可用余额："+t._s(t.submitlist&&t.submitlist.userInfo.now_money))])])])]),e("div",{staticClass:"Totalprice"},[e("div",[e("span",[t._v("商品总价:")]),e("span",[t._v("￥"+t._s(t.zhifu&&t.zhifu.result.total_price))])]),t.zhifu&&t.zhifu.result.pay_postage?e("div",[e("span",[t._v("运费:")]),e("span",[t._v("￥"+t._s(t.zhifu&&t.zhifu.result.pay_postage))])]):t._e(),t.zhifu&&t.zhifu.result.deduction_price?e("div",[e("span",[t._v("积分抵扣:")]),e("span",[t._v("￥"+t._s(t.zhifu&&t.zhifu.result.deduction_price))])]):t._e()]),e("div",{staticClass:"total"},[e("div",[e("span",[t._v(" 合计: "),e("u",[t._v("￥"+t._s(t.zhifu&&t.zhifu.result.pay_price))])]),e("button",{on:{click:t.settlement}},[t._v("立即结算")])])])])},a=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"imgs"},[e("img",{attrs:{src:i("ae32")}})])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("li",[i("textarea",{attrs:{placeholder:"请添加备注（150字以内）"}})])}],n=(i("99af"),{data:function(){return{active:0,show:!1,chosenAddressId:"1",list:[{id:"1",name:"张三",tel:"13000000000",address:"浙江省杭州市西湖区文三路 138 号东方通信大厦 7 楼 501 室",isDefault:!0}],submitlist:null,checked:!1,priceGroups:null,index:1,payType:"weixin",useIntegral:0,zhifu:null,showList:!1,addressInfo:[]}},created:function(){var t=this;this.axios.post("http://47.115.51.185/api/order/confirm",{cartId:this.$route.params.id}).then((function(s){t.submitlist=s.data.data,t.priceGroups=s.data.data.priceGroup,t.addressInfo=s.data.data.addressInfo,console.log(t.addressInfo),console.log("this.submitlist==>",t.submitlist),t.locationadd()}))},methods:{showPopup:function(){this.show=!0},onclick:function(){this.$toast.setDefaultOptions({duration:1e3}),this.$toast({message:"暂无门店信息，您无法选择到店自提",icon:"cross"})},onAdd:function(){this.$router.push("/add_address")},weixin:function(){this.index=1,this.payType="weixin",this.locationadd()},yuee:function(){this.index=2,this.payType="yue",this.locationadd()},checkeds:function(){this.checked=!this.checked,this.checked?this.useIntegral=1:this.useIntegral=0,this.locationadd()},locationadd:function(){var t=this;this.axios.post("http://47.115.51.185/api/order/computed/"+this.submitlist.orderKey,{addressId:this.submitlist.addressInfo.id,couponId:0,payType:this.payType,shipping_type:1,useIntegral:this.useIntegral}).then((function(s){t.zhifu=s.data.data,console.log("this.zhifu==>",t.zhifu)}))},settlement:function(){var t=this;this.axios.post("http://47.115.51.185/api/order/create/"+this.submitlist.orderKey,{addressId:this.submitlist.addressInfo.id,bargainId:0,combinationId:0,couponId:0,from:"weixinh5",mark:"",payType:this.payType,phone:"",pinkId:0,real_name:"",seckill_id:0,shipping_type:1,store_id:0,useIntegral:this.useIntegral}).then((function(s){console.log("this.submitlist==>",t.submitlist),console.log("data提交",s),t.$toast.loading({message:"订单生成中",forbidClick:!0,loadingType:"spinner"}),"微信支付错误返回：mch_id参数格式错误"==s.data.msg?(t.$toast.setDefaultOptions({duration:2e3}),setTimeout((function(){t.$toast(s.data.msg),t.$router.push("/orders/status/".concat(s.data.data&&s.data.data.result.orderId,"/0?msg=").concat(s.data.msg))}),1e3)):(t.$toast.setDefaultOptions({duration:2e3}),setTimeout((function(){t.$toast(s.data.msg),t.$router.push("/orders/status/".concat(s.data.data&&s.data.data.result.orderId,"/1"))}),1e3))}))}}}),o=n,r=(i("1aec"),i("2877")),c=Object(r["a"])(o,e,a,!1,null,null,null);s["default"]=c.exports},"65f0":function(t,s,i){var e=i("861d"),a=i("e8b5"),n=i("b622"),o=n("species");t.exports=function(t,s){var i;return a(t)&&(i=t.constructor,"function"!=typeof i||i!==Array&&!a(i.prototype)?e(i)&&(i=i[o],null===i&&(i=void 0)):i=void 0),new(void 0===i?Array:i)(0===s?0:s)}},8418:function(t,s,i){"use strict";var e=i("c04e"),a=i("9bf2"),n=i("5c6c");t.exports=function(t,s,i){var o=e(s);o in t?a.f(t,o,n(0,i)):t[o]=i}},"99af":function(t,s,i){"use strict";var e=i("23e7"),a=i("d039"),n=i("e8b5"),o=i("861d"),r=i("7b0b"),c=i("50c4"),d=i("8418"),u=i("65f0"),l=i("1dde"),p=i("b622"),f=i("2d00"),h=p("isConcatSpreadable"),v=9007199254740991,_="Maximum allowed index exceeded",m=f>=51||!a((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),b=l("concat"),g=function(t){if(!o(t))return!1;var s=t[h];return void 0!==s?!!s:n(t)},I=!m||!b;e({target:"Array",proto:!0,forced:I},{concat:function(t){var s,i,e,a,n,o=r(this),l=u(o,0),p=0;for(s=-1,e=arguments.length;s<e;s++)if(n=-1===s?o:arguments[s],g(n)){if(a=c(n.length),p+a>v)throw TypeError(_);for(i=0;i<a;i++,p++)i in n&&d(l,p,n[i])}else{if(p>=v)throw TypeError(_);d(l,p++,n)}return l.length=p,l}})},ae32:function(t,s,i){t.exports=i.p+"img/gun.05bf1c84.jpg"},e82e:function(t,s,i){t.exports=i.p+"img/noCoupon.e524084b.e524084b.png"},e8b5:function(t,s,i){var e=i("c6b6");t.exports=Array.isArray||function(t){return"Array"==e(t)}}}]);
//# sourceMappingURL=chunk-785954a0.00bd32e6.js.map